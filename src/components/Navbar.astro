---
import fluentFlyoutTitle from "../assets/FluentFlyoutTitle.webp"
---

<nav
	id="main-nav"
	class="fixed top-0 w-full z-50 bg-gray-900/80 backdrop-blur-xl backdrop-contrast-125 backdrop-brightness-125 border-b border-gray-500/50 transition-opacity duration-700">
	<div class="container mx-auto px-6 py-2 flex justify-between items-center font-segoe-ui-variable-display">
		<a
			href="/"
			id="nav-logo"
			class="opacity-0 pointer-events-none transition-opacity duration-300"
			><img
				src={fluentFlyoutTitle.src}
				alt="FluentFlyout Logo"
				class="h-9"
			/></a
		>

		<!-- Desktop Navigation -->
		<div class="hidden md:flex space-x-6">
			<a
				href="/#features"
				class="text-gray-300 hover:text-primary transition">Features</a
			>
			<a
				href="/changelog"
				class="text-gray-300 hover:text-primary transition">Changelog</a
			>
			<a href="/faq" class="text-gray-300 hover:text-primary transition"
				>FAQ</a
			>
			<a
				href="https://github.com/unchihugo/FluentFlyout"
				target="_blank"
				class="text-gray-300 hover:text-primary transition">GitHub</a
			>
		</div>

		<!-- Hamburger Menu Button (Mobile) -->
		<button
			id="mobile-menu-button"
			class="md:hidden text-gray-300 hover:text-primary transition focus:outline-none relative z-50"
			aria-label="Toggle menu">
			<svg
				id="hamburger-icon"
				class="w-6 h-6"
				fill="none"
				stroke="currentColor"
				viewBox="0 0 24 24">
				<path
					stroke-linecap="round"
					stroke-linejoin="round"
					stroke-width="2"
					d="M4 6h16M4 12h16M4 18h16"></path>
			</svg>
			<svg
				id="close-icon"
				class="w-6 h-6 hidden"
				fill="none"
				stroke="currentColor"
				viewBox="0 0 24 24">
				<path
					stroke-linecap="round"
					stroke-linejoin="round"
					stroke-width="2"
					d="M6 18L18 6M6 6l12 12"></path>
			</svg>
		</button>

		<a
			href="https://apps.microsoft.com/detail/9N45NSM4TNBP?mode=direct"
			id="nav-download"
			class="hidden sm:inline-block opacity-0 pointer-events-none transition-opacity duration-300">
			<img
				src="https://get.microsoft.com/images/en-us%20light.svg"
				alt="Get it from Microsoft"
				class="h-12 sm:h-12 transform button-hover-effect transition-transform duration-300"
			/>
		</a>
	</div>
</nav>

<!-- Mobile Menu (Outside nav for proper z-index stacking) -->
<div
	id="mobile-menu"
	class="md:hidden fixed top-0 left-0 w-full h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 opacity-0 invisible transition-all duration-300 ease-in-out z-40">
	<div class="flex flex-col items-center justify-center h-full space-y-8 px-6">
		<a
			href="/#features"
			class="mobile-menu-link text-3xl font-semibold text-gray-200 hover:text-primary transition-colors">
			Features
		</a>
		<a
			href="/changelog"
			class="mobile-menu-link text-3xl font-semibold text-gray-200 hover:text-primary transition-colors">
			Changelog
		</a>
		<a
			href="/faq"
			class="mobile-menu-link text-3xl font-semibold text-gray-200 hover:text-primary transition-colors">
			FAQ
		</a>
		<a
			href="https://github.com/unchihugo/FluentFlyout"
			target="_blank"
			class="mobile-menu-link text-3xl font-semibold text-gray-200 hover:text-primary transition-colors">
			GitHub
		</a>
		<a
			href="https://apps.microsoft.com/detail/9N45NSM4TNBP?mode=direct"
			class="mobile-menu-link mt-8">
			<img
				src="https://get.microsoft.com/images/en-us%20light.svg"
				alt="Get it from Microsoft"
				class="h-16"
			/>
		</a>
	</div>
</div>

<script>
	const mobileMenuButton = document.getElementById("mobile-menu-button")
	const mobileMenu = document.getElementById("mobile-menu")
	const hamburgerIcon = document.getElementById("hamburger-icon")
	const closeIcon = document.getElementById("close-icon")
	const mobileMenuLinks = document.querySelectorAll(".mobile-menu-link")

	if (mobileMenuButton && mobileMenu && hamburgerIcon && closeIcon) {
		mobileMenuButton.addEventListener("click", () => {
			const isOpen = mobileMenu.classList.contains("opacity-100")

			if (isOpen) {
				// Close menu
				mobileMenu.classList.remove("opacity-100", "visible")
				mobileMenu.classList.add("opacity-0", "invisible")
				hamburgerIcon.classList.remove("hidden")
				closeIcon.classList.add("hidden")
				document.body.style.overflow = ""
			} else {
				// Open menu
				mobileMenu.classList.remove("opacity-0", "invisible")
				mobileMenu.classList.add("opacity-100", "visible")
				hamburgerIcon.classList.add("hidden")
				closeIcon.classList.remove("hidden")
				document.body.style.overflow = "hidden"
			}
		})

		// Close menu when clicking on a link
		mobileMenuLinks.forEach((link) => {
			link.addEventListener("click", () => {
				mobileMenu.classList.remove("opacity-100", "visible")
				mobileMenu.classList.add("opacity-0", "invisible")
				hamburgerIcon.classList.remove("hidden")
				closeIcon.classList.add("hidden")
				document.body.style.overflow = ""
			})
		})
	}
</script>
